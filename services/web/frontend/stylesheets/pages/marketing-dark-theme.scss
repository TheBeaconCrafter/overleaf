/* Dark Theme for ALL Pages (except editor) */
.content.content-alt,
body[data-ol-marketing-dark-theme] {
  &:not(.ide-page) {
    background-color: var(--neutral-10);
  }
}

/* Apply dark theme via body class - works on ALL pages */
body.dark-theme-marketing {
  background-color: var(--neutral-10);
  
  /* Exclude the editor from dark theme */
  &.ide-page {
    background-color: initial;
    
    .navbar-default {
      background-color: initial;
      border-bottom: none;
    }
  }
  
  .content,
  .content-alt {
    background-color: var(--neutral-10);
  }
  
  /* Update navbar for dark theme - distinct from background */
  .navbar-default {
    background-color: var(--neutral-20);
    border-bottom: 1px solid var(--neutral-30);
    
    --navbar-bg: var(--neutral-20);
    --navbar-title-color: var(--white);
    --navbar-subdued-color: var(--white);
    --navbar-link-color: var(--white);
  }
  
  /* Fix title text contrast on login/register pages */
  h1, h2, h3, h4, h5, h6 {
    color: var(--white);
  }
  
  .page-header h1 {
    color: var(--white);
  }
  
  /* Fix label colors */
  label,
  .form-label {
    color: var(--neutral-70);
  }
  
  /* Improve link visibility */
  a:not(.btn) {
    color: var(--green-40);
    
    &:hover {
      color: var(--green-30);
    }
  }
}

/* Fix for React-based pages (project list, settings, etc.) */
html.dark-theme-marketing-preload,
html.dark-theme-marketing-preload body,
body.dark-theme-marketing,
body.dark-theme-marketing.application-page,
body.dark-theme-marketing.website-redesign {
  /* Override themed color variables for dark mode - IMPORTANT: these need high specificity */
  --bg-primary-themed: #1e1e1e !important;
  --bg-secondary-themed: #2a2a2a !important;
  --bg-light-primary: #1e1e1e !important;
  --bg-light-secondary: #2a2a2a !important;
  --bg-light-tertiary: #3a3a3a !important;
  --content-primary-themed: #fff !important;
  --content-secondary-themed: #cccccc !important;
  --content-secondary: #cccccc !important;
  --border-divider-themed: #4a4a4a !important;
  --border-divider: #4a4a4a !important;
  --ds-nav-bg-color: #1e1e1e !important;
  --ds-nav-hover-bg: #2a2a2a !important;
  --ds-nav-color: #cccccc !important;
  
  /* Fix table components globally */
  .table-container {
    background-color: var(--neutral-20);
  }
  
  .table-container-bordered {
    border-color: var(--neutral-40);
    background-color: var(--neutral-20);
  }
  
  /* Fix project list page specifically */
  .project-ds-nav-page {
    color: var(--neutral-80);
    
    .project-list-wrapper {
      background-color: var(--neutral-10);
    }
    
    .project-ds-nav-content {
      background-color: var(--neutral-20);
      border-color: var(--neutral-40);
    }
    
    .project-ds-nav-content-and-messages > * {
      border-left-color: var(--neutral-40);
    }
    
    /* Fix "All projects" and other title text in main area */
    h1, h2, h3, h4, h5, h6 {
      color: var(--white) !important;
    }
    
    /* Fix "All projects" text in LEFT SIDEBAR */
    .project-list-filters {
      .dropdown-header {
        color: var(--white) !important;
        font-weight: bold;
      }
      
      > li > button {
        color: var(--neutral-80);
      }
      
      > li.active button {
        color: var(--white) !important;
        background-color: var(--green-50) !important;
      }
    }
    
    /* Fix borders - make them subtle, not thick white */
    .project-ds-nav-project-list {
      border: none !important;
    }
    
    /* Fix table styling */
    .dash-cell-name a {
      color: var(--white) !important;
    }
    
    /* Fix sidebar colors */
    .project-list-sidebar-wrapper-react {
      background-color: var(--neutral-10);
    }
    
    /* Fix button hover states */
    .btn-link {
      &:hover,
      &:focus {
        background-color: var(--neutral-30) !important;
      }
    }
  }
  
  /* Dropdown menus (admin, user, new project, etc.) */
  .dropdown-menu {
    background-color: var(--neutral-20) !important;
    border-color: var(--neutral-40) !important;
    
    .dropdown-item,
    button,
    a,
    li > a,
    li > button {
      background-color: var(--neutral-20) !important;
      color: var(--white) !important;
      
      &:hover,
      &:focus,
      &:active {
        background-color: var(--neutral-30) !important;
        color: var(--white) !important;
      }
    }
    
    li {
      background-color: var(--neutral-20) !important;
    }
    
    .dropdown-header {
      color: var(--neutral-70) !important;
      background-color: var(--neutral-20) !important;
    }
    
    .dropdown-divider {
      border-top-color: var(--neutral-40) !important;
    }
  }
  
  /* Fix Bootstrap dropdown in navbar */
  .navbar-nav .dropdown-menu {
    background-color: var(--neutral-20) !important;
    
    li,
    li > a,
    li > button,
    a,
    button {
      background-color: var(--neutral-20) !important;
      color: var(--white) !important;
      
      &:hover,
      &:focus {
        background-color: var(--neutral-30) !important;
        color: var(--white) !important;
      }
    }
  }
  
  /* Fix New Project button dropdown */
  .new-project-dropdown,
  .new-project-button-dropdown {
    .dropdown-menu {
      background-color: var(--neutral-20) !important;
      border-color: var(--neutral-40) !important;
      
      li,
      button,
      a {
        background-color: var(--neutral-20) !important;
        color: var(--white) !important;
        
        &:hover,
        &:focus {
          background-color: var(--neutral-30) !important;
          color: var(--white) !important;
        }
      }
    }
  }
  
  /* Fix search bar in project list */
  .project-ds-nav-page {
    /* Search input styling */
    input[type="text"],
    input[type="search"],
    .form-control {
      background-color: var(--neutral-20) !important;
      border-color: var(--neutral-40) !important;
      color: var(--white) !important;
      
      &::placeholder {
        color: var(--neutral-60) !important;
      }
      
      &:focus {
        background-color: var(--neutral-20) !important;
        border-color: var(--green-50) !important;
        color: var(--white) !important;
      }
    }
  }
  
  /* Override the light red accent color (#ffe5e5 / green-10 / bg-accent-03) for dark mode */
  --bg-accent-03: #4a1a1a !important;
  --green-10: #4a1a1a !important;
  
  /* Fix selected project row */
  .project-ds-nav-page {
    .dash-cell {
      background-color: transparent;
    }
    
    /* Override Bootstrap's table active background to use darker red in dark mode */
    --bs-table-bg: transparent !important;
    --bs-table-active-bg: #4a1a1a !important; /* Dark red instead of light red (#ffe5e5) for legibility */
    --bs-table-active-color: var(--white) !important;
    --bs-table-hover-bg: #5a2020 !important; /* Slightly lighter dark red on hover */
    --bs-table-hover-color: var(--white) !important;
    
    /* Also override at the table level */
    .table {
      --bs-table-active-bg: #4a1a1a !important;
      --bs-table-hover-bg: #5a2020 !important;
    }
    
    /* Fix table rows to not show white background */
    tbody tr {
      background-color: transparent !important;
      
      td,
      th {
        background-color: transparent !important;
      }
    }
    
    /* Fix selected row using Bootstrap's table-active class */
    tr.table-active,
    tr.table-active:not(:hover) {
      /* Let Bootstrap's variable work, but we've overridden it to dark red above */
      background-image: none !important;
      
      td,
      th {
        background-image: none !important;
        color: var(--white) !important;
      }
      
      &:hover {
        background-image: none !important;
        
        td,
        th {
          background-image: none !important;
          color: var(--white) !important;
        }
      }
      
      /* Fix More and Tag buttons when project selected - no outline */
      .btn,
      .btn-link {
        color: var(--white) !important;
        background-color: transparent !important;
        border: none !important;
        outline: none !important;
        box-shadow: none !important;
        
        &:hover {
          background-color: var(--neutral-50) !important;
        }
        
        &:focus,
        &:active {
          outline: none !important;
          box-shadow: none !important;
        }
      }
    }
    
    /* Also handle older class names if they exist */
    tr.project-list-table-row-selected {
      background-color: var(--neutral-30) !important;
      --bs-table-bg: var(--neutral-30) !important;
      
      td,
      th {
        background-color: var(--neutral-30) !important;
        color: var(--white) !important;
      }
      
      &:hover {
        background-color: var(--neutral-40) !important;
        
        td,
        th {
          background-color: var(--neutral-40) !important;
        }
      }
      
      .btn,
      .btn-link {
        color: var(--white) !important;
        background-color: transparent !important;
        border: none !important;
        outline: none !important;
        box-shadow: none !important;
        
        &:hover {
          background-color: var(--neutral-50) !important;
        }
        
        &:focus,
        &:active {
          outline: none !important;
          box-shadow: none !important;
        }
      }
    }
  }
  
  /* Fix project loading screen */
  .loading-screen,
  .loading-screen-brand-container {
    background-color: var(--neutral-10) !important;
  }
  
  .loading-screen-label {
    color: var(--white) !important;
  }
  
  /* Fix settings page and other application pages */
  &.application-page {
    .content,
    .content-alt {
      background-color: var(--neutral-10);
    }
  }
  
  /* Fix admin active users page */
  .badge {
    &.bg-success {
      background-color: var(--green-50) !important;
      color: var(--white) !important;
    }
    
    &.bg-secondary {
      background-color: var(--neutral-50) !important;
      color: var(--white) !important;
    }
  }
  
  .alert {
    &.alert-info {
      background-color: var(--blue-60) !important;
      border-color: var(--blue-50) !important;
      color: var(--white) !important;
    }
    
    &.alert-warning {
      background-color: var(--yellow-60) !important;
      border-color: var(--yellow-50) !important;
      color: var(--neutral-10) !important;
    }
    
    &.alert-danger {
      background-color: var(--red-60) !important;
      border-color: var(--red-50) !important;
      color: var(--white) !important;
      
      a {
        color: var(--white) !important;
        text-decoration: underline;
        
        &:hover {
          color: var(--neutral-80) !important;
        }
      }
    }
  }
  
  /* Fix notification error messages (login page) */
  .notification {
    &.notification-type-error {
      background-color: var(--red-60) !important;
      border-color: var(--red-50) !important;
      color: var(--white) !important;
      
      .notification-content {
        color: var(--white) !important;
      }
      
      .notification-icon {
        color: var(--white) !important;
      }
      
      a:not(.btn) {
        color: var(--white) !important;
        text-decoration: underline;
        
        &:hover {
          color: var(--neutral-80) !important;
        }
      }
    }
  }
  
  /* Fix modals in dark mode */
  .modal-content {
    background-color: var(--neutral-20) !important;
    border-color: var(--neutral-40) !important;
    
    .modal-header {
      background-color: var(--neutral-30) !important;
      border-bottom-color: var(--neutral-40) !important;
      color: var(--white) !important;
      
      &.bg-danger {
        background-color: var(--red-60) !important;
      }
      
      .modal-title {
        color: var(--white) !important;
      }
      
      .close {
        color: var(--white) !important;
        opacity: 0.8;
        
        &:hover {
          opacity: 1;
        }
      }
    }
    
    .modal-body {
      background-color: var(--neutral-20) !important;
      color: var(--white) !important;
      
      .form-group label {
        color: var(--white) !important;
      }
      
      .form-control {
        background-color: var(--neutral-30) !important;
        border-color: var(--neutral-40) !important;
        color: var(--white) !important;
        
        &::placeholder {
          color: var(--neutral-60) !important;
        }
        
        &:focus {
          background-color: var(--neutral-30) !important;
          border-color: var(--green-50) !important;
          color: var(--white) !important;
        }
      }
    }
    
    .modal-footer {
      background-color: var(--neutral-20) !important;
      border-top-color: var(--neutral-40) !important;
    }
  }
  
  /* Fix button groups and action buttons */
  .btn-group,
  .d-flex.gap-1 {
    .btn {
      &.btn-warning {
        background-color: #d97706 !important;
        border-color: #b45309 !important;
        color: var(--white) !important;
        
        &:hover {
          background-color: #b45309 !important;
        }
      }
      
      &.btn-info {
        background-color: #0284c7 !important;
        border-color: #0369a1 !important;
        color: var(--white) !important;
        
        &:hover {
          background-color: #0369a1 !important;
        }
      }
      
      &.btn-danger {
        background-color: var(--red-60) !important;
        border-color: var(--red-70) !important;
        color: var(--white) !important;
        
        &:hover {
          background-color: var(--red-70) !important;
        }
      }
    }
  }
  
  /* Fix textarea in dark mode */
  textarea.form-control {
    background-color: var(--neutral-30) !important;
    border-color: var(--neutral-40) !important;
    color: var(--white) !important;
    
    &:focus {
      background-color: var(--neutral-30) !important;
      border-color: var(--green-50) !important;
      color: var(--white) !important;
    }
  }
  
  /* Fix admin modals (vanilla JS modals with inline styles) */
  #resetUrlModal,
  #changeEmailModal,
  #deleteUserModal {
    > div {
      background-color: var(--neutral-20) !important;
      border-color: var(--neutral-40) !important;
      color: var(--white) !important;
      
      h5 {
        color: var(--white) !important;
      }
      
      p {
        color: var(--white) !important;
      }
      
      strong {
        color: var(--white) !important;
      }
      
      label {
        color: var(--white) !important;
      }
      
      ul {
        color: var(--white) !important;
      }
      
      input[type='email'],
      textarea {
        background-color: var(--neutral-30) !important;
        border-color: var(--neutral-40) !important;
        color: var(--white) !important;
        
        &::placeholder {
          color: var(--neutral-60) !important;
        }
        
        &:focus {
          background-color: var(--neutral-30) !important;
          border-color: var(--green-50) !important;
          color: var(--white) !important;
          outline: none;
        }
      }
      
      button {
        &[id*='close'] {
          color: var(--white) !important;
          
          &:hover {
            color: var(--neutral-80) !important;
          }
        }
      }
    }
  }
  
  /* Delete modal header (has red background) */
  #deleteUserModal > div > div:first-child {
    background-color: var(--red-60) !important;
    color: var(--white) !important;
    
    h5 {
      color: var(--white) !important;
    }
    
    button {
      color: var(--white) !important;
      
      &:hover {
        color: var(--neutral-80) !important;
      }
    }
  }
  
  /* Warning text in delete modal */
  #deleteUserModal > div > div:nth-child(2) > p:first-child {
    color: var(--red-40) !important;
    
    strong {
      color: var(--red-40) !important;
    }
  }
}

/* Theme toggle button styling */
.theme-toggle-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem;
  border: none;
  background: transparent;
  color: var(--navbar-link-color);
  cursor: pointer;
  transition: opacity 0.2s ease;
  
  &:hover {
    opacity: 0.8;
    background: rgba(255, 255, 255, 0.1);
  }
  
  .material-symbols {
    font-size: 1.5rem;
  }
}

